<!doctype html>
<html lang="en">
<head>
	<title>CompleteConceptStrength Athlete Homepage</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, user-scalable=no">
 	<script src="bower_components/jquery-ajax-only/jquery-ajax-only.js"></script>
	<script src="bower_components/jquery/dist/jquery.min.js"></script>
	<script src="bower_components/angular/angular.min.js"></script>
 	<script src="bower_components/angular-route/angular-route.min.js"></script>
	<script src="bower_components/angular-modal-service/dst/angular-modal-service.min.js"></script>
	<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="bower_components/store.js/store.min.js"></script>
    <script src="scripts/app.js"></script>
	<script src="scripts/services/userService.js"></script>
	<script src="scripts/services/userConnectionService.js"></script>
    <script src="scripts/controllers/homepageCtrl.js"></script>

	<link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
	<link href="styles/main.css" rel="stylesheet" type="text/css">
    <link href="styles/homepage.css" rel="stylesheet" type="text/css">
</head>

<body ng-app="homepageModule" ng-controller="homepageCtrl" ng-init="loadHomepage()">
    <div class="container">
        <div class="row top-bar">
            <form name="notificationsForm" class="col-xs-4">
            	<div class="dropdown">
					<button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" ng-click="notifications()">Notifications <span class="badge">{{notifications}}</span></button>
					<ul class="dropdown-menu dropdown-menu-centered" >
						<li><a ng-click="notifications()">Notification1</a></li>
					</ul>
				</div>
            </form>
            <h1 class="col-xs-4">Welcome {{username}}</h1>
            <form name="logoutForm" class="col-xs-4">
                <input type="button" class="btn btn-primary" ng-click="logout()" value="Logout"/>
            </form>
        </div>
        
        <div class="main-block">
            <ul class="nav nav-pills nav-justified">
                <li class="active"><a data-toggle="tab" href="#prescription">Prescription</a></li>
                <li><a data-toggle="tab" href="#connect" ng-click="loadAllConnections()">Connect</a></li>
                <li><a data-toggle="tab" href="#settings">Settings</a></li>
            </ul>
            
            <div class="tab-content">
                <div id="prescription" class="tab-pane fade in active">
                    <h2>Calendar</h2>
                    <input type="button" class="btn btn-primary" ng-click="swapView()" value="{{calendarView}}" />
                </div>
                <div id="connect" class="tab-pane fade">
					<h2 class="left-aligned">Find Connections</h2>
					<form name="searchForm" role="form">
						<div class="input-group col-sm-4">
	                        <input type="text" class="form-control" placeholder="Search users by name, email or organization" name="srch-term" id="srch-term" ng-model="searchText">
	                        <div class="input-group-btn">
	                            <button class="btn btn-default" type="submit" ng-click="searchConnections(searchText)"><i class="glyphicon glyphicon-search"></i></button>
	                        </div>
	                    </div>
                    </form>
                    <br>

                    <div ng-show="showUserSearchResults()">
                    	<h2 class="left-aligned">Search Results</h2>
                    	<table class="table table-connect">
							<tbody>
							  <tr ng-repeat="connection in userSearchResults">
								<td class="col-sm-1"> 
									<img src="images/default_profile_pic.jpg" alt="Profile Pic" style="width: 100px; height: 100px;">
								</td>
								<td>{{connection.user.firstName}} {{connection.user.lastName}}
								<br>{{connection.user.email}}
								<br>{{connection.user.organization}}</td>
								<td class="last-row">            
									<div class="dropdown">
										<button class="btn btn-primary dropdown-toggle btn-connect" type="button" data-toggle="dropdown">{{connection.userConnectionStatus.status}}
										<span class="caret"></span></button>
										<ul class="dropdown-menu dropdown-menu-right dropdownbox">
											<li ng-repeat="action in connection.userConnectionStatus.actions"><a ng-click="connectionAction(connection, action)">{{action}}</a></li>
										</ul>
									</div>
								</td>
							  </tr>
							</tbody>
						</table>
                    </div>

                    <div ng-hide="searchText.length">
                    	<div ng-show="pendingConnections.length > 0">
							<h2 class="left-aligned">Pending</h2>
							<table class="table table-connect">
								<tbody>
								  <tr ng-repeat="connection in pendingConnections">
									<td class="col-sm-1"> 
										<img src="images/default_profile_pic.jpg" alt="Profile Pic" style="width: 100px; height: 100px;">
									</td>
									<td>{{connection.user.firstName}} {{connection.user.lastName}}
									<br>{{connection.user.email}}
									<br>{{connection.user.organization}}</td>
									<td class="last-row">            
										<div class="dropdown">
											<button class="btn btn-primary dropdown-toggle btn-connect" type="button" data-toggle="dropdown">{{connection.userConnectionStatus.status}}
											<span class="caret"></span></button>
											<ul class="dropdown-menu dropdown-menu-right dropdownbox">
												<li ng-repeat="action in connection.userConnectionStatus.actions"><a ng-click="connectionAction(connection, action)">{{action}}</a></li>
											</ul>
										</div>
									</td>
								  </tr>
								</tbody>
							</table>
						</div>

						<div ng-show="existingConnections.length > 0">
							<h2 class="left-aligned">Existing</h2>
							<table class="table table-connect">
								<tbody>
								  <tr ng-repeat="connection in existingConnections">
									<td class="col-sm-1"> 
										<img src="images/default_profile_pic.jpg" alt="Profile Pic" style="width: 100px; height: 100px;">
									</td>
									<td>{{connection.user.firstName}} {{connection.user.lastName}}
									<br>{{connection.user.email}}
									<br>{{connection.user.organization}}</td>
									<td class="last-row">            
										<div class="dropdown">
											<button class="btn btn-primary dropdown-toggle btn-connect" type="button" data-toggle="dropdown">{{connection.userConnectionStatus.status}}
											<span class="caret"></span></button>
											<ul class="dropdown-menu dropdown-menu-right dropdownbox">
												<li ng-repeat="action in connection.userConnectionStatus.actions"><a ng-click="connectionAction(connection, action)">{{action}}</a></li>
											</ul>
										</div>
									</td>
								  </tr>
								</tbody>
						    </table>
						</div>
					</div>

					<!-- Success connection modal (pop-up) -->
					<script type="text/ng-template" id="modal.html"></script>
					<div class="modal fade" id="successConnectionModal" role="dialog">
						<div class="vertical-alignment-helper">
				    		<div class="modal-dialog vertical-align-center">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">
											<h3 class="modal-title" style="font-weight: bold;">{{modalHeader}}</h3>
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-success" ng-click="closeConnectionModal()" data-dismiss="modal">Okay!</button>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
                </div>
                <div id="settings" class="tab-pane fade">
                    <h2>Settings</h2>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
